# ===================================
# Solarpunk Gift Economy Mesh Network
# Environment Configuration
# ===================================
# Copy this file to .env and fill in your values

# ===================================
# NATS Configuration (Multi-Agent Coordination)
# ===================================
# NATS Server (default: GCP nats-jetstream VM)
NATS_URL=nats://34.185.163.86:4222
NATS_USER=orchestrator
NATS_PASSWORD=f3LJamuke3FMecv0JYNBhf8z
NATS_CONTEXT=gcp-orchestrator

# Project Namespace (prefix for all streams and subjects)
# IMPORTANT: Change this for each project to avoid conflicts
# Examples: ai_tutor, superalignment, multiverse_school, abstract_agent_team
NATS_NAMESPACE=solarpunk_utopia
PROJECT_NAME=solarpunk_utopia

# ===================================
# Server Configuration
# ===================================
# DTN Bundle System
HOST=0.0.0.0
PORT=8000
DEBUG=false
LOG_LEVEL=INFO
JSON_LOGS=false  # Set to true for production JSON logging

# ValueFlows Node (if running separately)
# VF_HOST=0.0.0.0
# VF_PORT=8001

# ===================================
# Database Configuration
# ===================================
# DTN Bundle System database
DATABASE_URL=sqlite:///dtn_bundles.db

# ValueFlows Node database
# VF_DATABASE_URL=sqlite:///valueflows.db

# ===================================
# CORS Configuration (GAP-41 Security)
# ===================================
# Comma-separated list of allowed origins for CORS
# Development default (if not set): localhost:3000,localhost:5173,127.0.0.1:3000,127.0.0.1:5173
# Production example: https://app.example.com,https://app2.example.com
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:5173,http://127.0.0.1:3000,http://127.0.0.1:5173

# ===================================
# Service URLs (Microservices Communication)
# ===================================
# ValueFlows service URL (from DTN service)
VF_SERVICE_URL=http://localhost:8001

# DTN Bundle service URL (from VF service)
DTN_SERVICE_URL=http://localhost:8000

# ===================================
# Authentication & Security
# ===================================
# JWT Secret (MUST be random in production!)
# Generate with: openssl rand -hex 32
JWT_SECRET=change-me-in-production-use-random-string
JWT_ALGORITHM=HS256
JWT_EXPIRATION_DAYS=7

# CSRF Secret (MUST be random in production!)
# Generate with: openssl rand -hex 32
CSRF_SECRET=change-me-in-production

# Admin API Key (for protected admin endpoints)
# Generate with: openssl rand -hex 32
ADMIN_API_KEY=

# Authentication mode: 'local' for dev (no email), 'magic_link' for production
AUTH_MODE=local
MAGIC_LINK_TTL_MINUTES=15

# ===================================
# Email Configuration (for Magic Link auth)
# ===================================
# Optional in development (AUTH_MODE=local), required in production
SMTP_HOST=
SMTP_PORT=587
SMTP_USER=
SMTP_PASSWORD=
SMTP_FROM_EMAIL=noreply@solarpunk.local

# ===================================
# DTN Bundle Configuration
# ===================================
MAX_BUNDLE_SIZE_MB=10
DEFAULT_TTL_HOURS=168
CACHE_BUDGET_MB=100
TTL_CHECK_INTERVAL_SECONDS=60
KEYPAIR_PATH=./dtn_keypair.json

# ===================================
# Gift Economy Configuration
# ===================================
DEFAULT_TRUST_THRESHOLD=0.9
MAX_CELL_SIZE=50
MIN_CELL_SIZE=5

# ===================================
# LLM Configuration (for AI Agents)
# ===================================
# Backend: ollama, mlx, remote, mock
LLM_BACKEND=ollama
LLM_MODEL=qwen2.5:1.5b
LLM_API_KEY=
LLM_API_BASE=
LLM_TEMPERATURE=0.7
LLM_MAX_TOKENS=512
LLM_TOP_P=0.9
LLM_TIMEOUT=30
LLM_ENABLE_CACHE=true
LLM_CACHE_DIR=.llm_cache

# ===================================
# Metrics & Monitoring
# ===================================
ENABLE_METRICS=true
METRICS_PORT=9090

# ===================================
# Matrix Configuration (optional - for chatroom MCP)
# ===================================
MATRIX_HOMESERVER=https://matrix.org
MATRIX_USER=@your-bot:matrix.org
MATRIX_PASSWORD=your-matrix-password

# ===================================
# Agent Memory (optional)
# ===================================
MEMORY_STORAGE_PATH=./agents/memories/

# ===================================
# Dashboard Backend (optional)
# ===================================
DASHBOARD_PORT=8000
DASHBOARD_HOST=0.0.0.0
